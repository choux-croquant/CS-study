# TCP/UDP

네트워크 모델의 전송계층에 해당하는 내용.

전송계층의 주요 ISSUE

- 데이터 전달의 순서 보장 : 의도한 순서대로 데이터가 전달되지 않는다면? >> 순서가 중요한 서비스 등의 경우 큰 문제 발생
- 데이터 흐름제어 : 수신자가 처리할 수 있는 데이터량 이상의 데이터를 보낸다면? >> 초과된 데이터분 만큼의 데이터 누락 발생
- 네트워크 혼잡 : 네트워크의 데이터 처리 속도 등의 이상이 생겨 네트워크 혼잡이 발생할 경우 데이터 전송이 제대로 안될 수 있다.
- 위 문제들을 해결하기 위한 프로토콜이 TCP/UDP 등이다.

**TCP(Transmission Control Protocol)**

- 3 way-handshake connection - 양방향 통신

  1. 클라이언트가 SYN 패킷(연결 요청)을 전송
  2. 서버는 이를 확인하고 ACK(수신 확인 응답)를 포함하여 클라이언트로 SYN 패킷 전송
  3. 서버의 요청에 대해 클라이언트가 ACK를 전송 후 연결 설정 완료.

- 4 way-handshake connecion close

  1. 데이터를 전부 송신한 클라이언트가 FIN 패킷 송신
  2. 서버가 종료에 대한 ACK를 전송 및 남은 패킷을 송신(일정 시간 대기)
  3. 서버가 모튼 패킷을 전달한 후 FIN 패킷 송신
  4. 클라이언트가 종료에 대한 ACK를 송신하고 연결 종료.

- 데이터의 순서를 보장

- 흐름 제어 및 혼잡 제어

- 오류 감지 가능

- 기본적으로 전송할 데이터를 나누고, TCP헤더 + 데이터의 형식으로 패킷을 만든다. 헤더에 담기는 내용은 아래를 참고

- https://ko.wikipedia.org/wiki/전송_제어_프로토콜

- 신뢰성은 보장되지만, 전송마다 3 way-handshake 방식으로 연결이 진행되므로 시간 손실이 발생한다.

- 패킷을 손실할 경우 재전송이 발생 - 신뢰성을 보장해야 할 경우 장점이지만 별로 중요하지 않은 데이터의 경우 불필요하게 전송이 많이 일어날 수 있다.

  

UDP(User Datagram Protocol)

- Connectionless protocol
  - 발신자가 일방적으로 데이터를 송신하며 검증하지 않음.
  - 즉 데이터의 순서가 보장되지 않으며, 유실될 수도 있다.
  - 유실 여부 등을 알 수 없으므로 재전송도 없다.
  - 연결과정이 없기 때문에 TCP에 비해 일반적으로 빠르다.
- UDP 헤더 + 데이터로 이루어진 패킷, 헤더의 경우 TCP와 비교하여 매우 간단하게 이루어져 있다.
- 헤더가 짧아 네트워크 부하가 감소되는 장점.
- 의미있는 서버 구성을 위해서는 직접 패킷을 관리해야 한다.
- 신뢰성이 그다지 필요하지 않은 경우 UDP 프로토콜을 활용하는 것을 통해 속도의 측면에서 성능을 개선하는데 사용 가능